"use strict";var e=require("preact"),t=require("preact/compat");function o(e,t){for(let o in t)e[o]=t[o];return e}function r(e,t){return Array.isArray(t)?t.reduce(r,e):null!=t&&!1!==t&&e.push(t),e}module.exports=function n(s,_,p,i){if(null==s||"object"!=typeof s)return Promise.resolve();let l=s.type,c=s.props,u=[];if(p=p||{},s.__=i,"function"==typeof l&&l!==e.Fragment&&l!==t.Suspense){let t,r=s.__c=new e.Component(c,p);r.__d=!0,r.__v=s,void 0===r.state&&(r.state={});let u=!1,a=l.contextType,m=a&&p[a.__c],d=null!=a?m?m.props.value:a.__p||a.__:p;return s.__=i,l.prototype&&"function"==typeof l.prototype.render?(u=!0,r=s.__c=new l(c,d),r.__d=!0,r.__v=s,r.props=c,r.context=d,void 0===r.state&&(r.state={}),l.getDerivedStateFromProps?r.state=o(o({},r.state),l.getDerivedStateFromProps(r.props,r.state)):r.componentWillMount&&r.componentWillMount(),t=()=>{try{return e.options.render&&e.options.render(s),e.options.__r&&e.options.__r(s),Promise.resolve(r.render(r.props,r.state,r.context))}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}}):t=()=>{try{const t=e.options.__s;e.options.__s=!0,e.options.render&&e.options.render(s),e.options.__r&&e.options.__r(s);const o=Promise.resolve(l.call(s.__c,c,d));return e.options.__s=t,o}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}},e.options.__b&&e.options.__b(s),(_?(_(s,u?r:void 0)||Promise.resolve()).then(t):t()).then(e=>(r.getChildContext&&(p=o(o({},p),r.getChildContext())),Array.isArray(e)?(s.__k=[],Promise.all(e.map(e=>(s.__k.push(e),n(e,_,p,s))))):n(e,_,p,s)))}return e.options.__b&&e.options.__b(s),c&&r(u=[],c.children).length?(s.__k=[],Promise.all(u.map(e=>(s.__k.push(e),n(e,_,p,s))))):Promise.resolve()};
//# sourceMappingURL=index.js.map
