!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("preact"),require("preact/compat")):"function"==typeof define&&define.amd?define(["preact","preact/compat"],t):(e||self).preactSsrPrepass=t(e.preact,e.compat)}(this,function(e,t){"use strict";function o(e,t){for(let o in t)e[o]=t[o];return e}function r(e,t){return Array.isArray(t)?t.reduce(r,e):null!=t&&!1!==t&&e.push(t),e}return function n(s,p,i,_){if(null==s||"object"!=typeof s)return Promise.resolve();let c=s.type,l=s.props,a=[];if(i=i||{},s.__=_,"function"==typeof c&&c!==e.Fragment&&c!==t.Suspense){let t,r=s.__c=new e.Component(l,i);r.__d=!0,r.__v=s,void 0===r.state&&(r.state={});let a=!1,u=c.contextType,d=u&&i[u.__c],f=null!=u?d?d.props.value:u.__p||u.__:i;return s.__=_,c.prototype&&"function"==typeof c.prototype.render?(a=!0,r=s.__c=new c(l,f),r.__d=!0,r.__v=s,r.props=l,r.context=f,void 0===r.state&&(r.state={}),c.getDerivedStateFromProps?r.state=o(o({},r.state),c.getDerivedStateFromProps(r.props,r.state)):r.componentWillMount&&r.componentWillMount(),t=()=>{try{return e.options.render&&e.options.render(s),e.options.__r&&e.options.__r(s),Promise.resolve(r.render(r.props,r.state,r.context))}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}}):t=()=>{try{const t=e.options.__s;e.options.__s=!0,e.options.render&&e.options.render(s),e.options.__r&&e.options.__r(s);const o=Promise.resolve(c.call(s.__c,l,f));return e.options.__s=t,o}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}},e.options.__b&&e.options.__b(s),(p?(p(s,a?r:void 0)||Promise.resolve()).then(t):t()).then(e=>(r.getChildContext&&(i=o(o({},i),r.getChildContext())),Array.isArray(e)?(s.__k=[],Promise.all(e.map(e=>(s.__k.push(e),n(e,p,i,s))))):n(e,p,i,s)))}return e.options.__b&&e.options.__b(s),l&&r(a=[],l.children).length?(s.__k=[],Promise.all(a.map(e=>(s.__k.push(e),n(e,p,i,s))))):Promise.resolve()}});
//# sourceMappingURL=index.umd.js.map
